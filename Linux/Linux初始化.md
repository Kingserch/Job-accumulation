+ #### Linux最小化安装
***
nmtui 可设置网卡
```
[root@like /]# sed -i 's#ONBOOT=no#ONBOOT=yes#g' /etc/sysconfig/network-scripts/ifcfg-ens33 	#查看网卡是否开启
[root@like /]# grep ONBOOT /etc/sysconfig/network-scripts/ifcfg-ens33	#查看修改是否成功
ONBOOT="yes"
[root@like /]# systemctl restart network	#重启网卡
[root@like /]# ip route 		#查看默认网关
default via 192.168.31.2 dev ens33 proto dhcp metric 100 
192.168.31.0/24 dev ens33 proto kernel scope link src 192.168.31.141 metric 100 
[root@like /]# cat /etc/resolv.conf  		#查看DNS配置
# Generated by NetworkManager
search localdomain
nameserver 192.168.31.2
```
#### 1.更新yum源
```
[root@like /]# curl -s -o/etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo
[root@like /]# curl -s -o /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo
```
#### 2.安装工作中需要的工具
```
[root@like /]# yum install tree nmap dos2unix lrzsz nc lsof wget tcpdump htop iftop iotop sysstat nethogs  vim  tig  jq   -y
[root@like /]# yum install axel -y	#多线程下载工具，可替代curl、wget。
```
#### 3.安装工作中需要的工具包
```
[root@like /]# yum install tree nmap dos2unix lrzsz nc lsof wget tcpdump htop iftop iotop sysstat nethogs  vim  tig  jq  net-tools -y
[root@like /]# yum install axel -y	#多线程下载工具，可替代curl、wget。
```
#### 4.查看所有的包组名称(包括安装的和未安装的)
```
[root@like /]# yum grouplist 
[root@like /]# yum groupinstall  "Cinnamon" -y 	#安装组包
```
#### 5.Selinux和防火墙操作
```
[root@like /]# systemctl stop firewalld		#临时关闭防火墙
[root@like /]# systemctl disable firewalld	#防火墙开机自关闭
[root@like /]# systemctl start firewalld	#临时启动防火墙
[root@like /]# systemctl enable firewalld	#防火墙开机开启
[root@like /]# systemctl status firewalld	#查看防火墙状态
[root@like /]# setenforce 0	#临时关闭SELinux
[root@like /]# setenforce 1	#临时打开SELinux
[root@like /]# getenforce	#查看SELinux状态
[root@like /]# sed -i 's/SELINUX=enforcing/SELINUX=disabled/g' /etc/selinux/config	#开机关闭SELinux
[root@like /]# systemctl status firewalld	#查看防火墙状态
[root@like /]# systemctl list-dependencies | grep 服务的名字   检测是否加入开启启动
```
#### 6.账户和登录安全
```
#删除特殊的账户和账户组,可删除的用户，如 adm，lp，sync，shutdown，halt，news，uucp，operator，games，gopher 等。
#可删除的组，如 adm，lp，news，uucp，games，dip，pppusers，popusers，slipusers 等。
[root@aly /]# cut -d : -f 1 /etc/passwd		#查看系统中存在的用户
root
bin
daemon
mail
ftp
nobody
systemd-network
dbus
polkitd
tss
abrt
sshd
postfix
tcpdump
[root@aly /]# cat /etc/passwd | grep -v /sbin/nologin | cut -d : -f 1 	#查看系统中可以登录的用户
root
```
```
# 关闭不必要的服务
anacron、auditd、autofs、avahi-daemon、avahi-dnsconfd、bluetooth、cpuspeed、firstboot、gpm、haldaemon、hidd、ip6tables、ipsec、isdn、lpd、mcstrans、messagebus、netfs、nfs、nfslock、nscd、pcscd portmap、readahead_early、restorecond、rpcgssd、rpcidmapd、rstatd、sendmail、setroubleshoot、yppasswdd ypserv
```
```
# 删除系统欢迎信息,/etc/issue 和 /etc/issue.net 文件都记录了操作系统的名称和版本号，当用户通过本地终端或本地虚拟控制台等登录系统时，/etc/issue 的文件内容就会显示。
当用户通过 ssh 或 telnet 等远程登录系统时，/etc/issue.net 文件内容就会在登录后显示。
在默认情况下 /etc/issue.net 文件的内容是不会在 ssh 登录后显示的，要显示这个信息可以修改 /etc/ssh/sshd_config 文件，在此文件中添加如下内容即可：Banner /etc/issue.net。
其实这些登录提示很明显泄漏了系统信息，为了安全起见，建议将此文件中的内容删除或修改。
/etc/redhat-release 文件也记录了操作系统的名称和版本号，为了安全起见，可以将此文件中的内容删除。
/etc/motd 文件是系统的公告信息。每次用户登录后，/etc/motd 文件的内容就会显示在用户的终端。
```
```
/etc/issue
/etc/issue.net
[root@ali-service aly]# cat /etc/redhat-release 
CentOS Linux Hackers go!!!
[root@ali-service aly]# cat /etc/motd 
Hackers go!!!
```
#### 7.优化
```
#root启动的单一进程的最大可以打开的文件数设置为65535个
[root@aly ]# egrep -v "^#|^$" /etc/security/limits.conf 
root soft nofile 65535
root hard nofile 65535
* soft nofile 65535
* hard nofile 65535
```
```
#查看Linux系统级的最大打开文件数限制，使用如下命令
[root@aly tomcat]# cat /proc/sys/fs/file-max
275362
#内核TCP参数方面
[root@aly tomcat]# vim /etc/sysctl.conf 
[root@aly tomcat]# egrep -v "^#|^$" /etc/sysctl.conf
vm.swappiness = 0
kernel.sysrq = 1
net.ipv4.neigh.default.gc_stale_time = 120
net.ipv4.conf.all.rp_filter = 0
net.ipv4.conf.default.rp_filter = 0
net.ipv4.conf.default.arp_announce = 2
net.ipv4.conf.lo.arp_announce = 2
net.ipv4.conf.all.arp_announce = 2
net.ipv4.tcp_max_tw_buckets = 5000	
net.ipv4.tcp_syncookies = 1		
net.ipv4.tcp_max_syn_backlog = 1024
net.ipv4.tcp_synack_retries = 2
net.ipv4.tcp_tw_reuse= 1			#这可无
net.ipv6.conf.all.disable_ipv6 = 1
net.ipv6.conf.default.disable_ipv6 = 1
net.ipv6.conf.lo.disable_ipv6 = 1
```